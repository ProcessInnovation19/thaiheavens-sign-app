import{_ as a,c as i,o as n,ah as e}from"./chunks/framework.D--hi4lz.js";const c=JSON.parse('{"title":"Guida Deploy su UpCloud + RunCloud","description":"","frontmatter":{},"headers":[],"relativePath":"DEPLOY_RUNCLOUD.md","filePath":"DEPLOY_RUNCLOUD.md"}'),l={name:"DEPLOY_RUNCLOUD.md"};function p(r,s,t,h,o,d){return n(),i("div",null,[...s[0]||(s[0]=[e(`<h1 id="guida-deploy-su-upcloud-runcloud" tabindex="-1">Guida Deploy su UpCloud + RunCloud <a class="header-anchor" href="#guida-deploy-su-upcloud-runcloud" aria-label="Permalink to &quot;Guida Deploy su UpCloud + RunCloud&quot;">â€‹</a></h1><p>Questa guida ti aiuterÃ  a deployare ThaiHeavensSignApp su un server UpCloud gestito con RunCloud.</p><h2 id="prerequisiti" tabindex="-1">Prerequisiti <a class="header-anchor" href="#prerequisiti" aria-label="Permalink to &quot;Prerequisiti&quot;">â€‹</a></h2><ol><li>Server UpCloud attivo</li><li>RunCloud configurato sul server</li><li>Accesso SSH al server</li><li>Dominio (opzionale, ma consigliato)</li></ol><h2 id="step-1-preparare-il-server" tabindex="-1">Step 1: Preparare il Server <a class="header-anchor" href="#step-1-preparare-il-server" aria-label="Permalink to &quot;Step 1: Preparare il Server&quot;">â€‹</a></h2><h3 id="_1-1-connetti-il-server-a-runcloud" tabindex="-1">1.1 Connetti il Server a RunCloud <a class="header-anchor" href="#_1-1-connetti-il-server-a-runcloud" aria-label="Permalink to &quot;1.1 Connetti il Server a RunCloud&quot;">â€‹</a></h3><ol><li>Vai su <a href="https://app.runcloud.io" target="_blank" rel="noreferrer">RunCloud Dashboard</a></li><li>Aggiungi il tuo server UpCloud</li><li>Segui la procedura di installazione di RunCloud sul server</li></ol><h3 id="_1-2-installa-node-js" tabindex="-1">1.2 Installa Node.js <a class="header-anchor" href="#_1-2-installa-node-js" aria-label="Permalink to &quot;1.2 Installa Node.js&quot;">â€‹</a></h3><p>RunCloud supporta Node.js tramite &quot;Node.js Apps&quot;. Verifica che Node.js sia installato:</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Connettiti via SSH al server</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@tuo-server-ip</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Verifica Node.js (RunCloud lo installa automaticamente)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Se non Ã¨ installato, RunCloud lo installerÃ  quando crei la prima Node.js App.</p><h2 id="step-2-preparare-il-codice" tabindex="-1">Step 2: Preparare il Codice <a class="header-anchor" href="#step-2-preparare-il-codice" aria-label="Permalink to &quot;Step 2: Preparare il Codice&quot;">â€‹</a></h2><h3 id="_2-1-clona-il-repository" tabindex="-1">2.1 Clona il Repository <a class="header-anchor" href="#_2-1-clona-il-repository" aria-label="Permalink to &quot;2.1 Clona il Repository&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Sulla macchina locale, prepara il repository</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Ready for production&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_2-2-sul-server-clona-il-repository" tabindex="-1">2.2 Sul Server, Clona il Repository <a class="header-anchor" href="#_2-2-sul-server-clona-il-repository" aria-label="Permalink to &quot;2.2 Sul Server, Clona il Repository&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Connettiti al server</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@tuo-server-ip</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Vai nella directory dove vuoi deployare (es. /home/runcloud)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/runcloud</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Clona il repository</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/ProcessInnovation19/thaiheavens-sign-app.git</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> thaiheavens-sign-app</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="step-3-configurare-runcloud-node-js-app" tabindex="-1">Step 3: Configurare RunCloud Node.js App <a class="header-anchor" href="#step-3-configurare-runcloud-node-js-app" aria-label="Permalink to &quot;Step 3: Configurare RunCloud Node.js App&quot;">â€‹</a></h2><h3 id="_3-1-crea-una-node-js-app-in-runcloud" tabindex="-1">3.1 Crea una Node.js App in RunCloud <a class="header-anchor" href="#_3-1-crea-una-node-js-app-in-runcloud" aria-label="Permalink to &quot;3.1 Crea una Node.js App in RunCloud&quot;">â€‹</a></h3><ol><li>Vai su RunCloud Dashboard</li><li>Seleziona il tuo server</li><li>Vai su &quot;Node.js Apps&quot; â†’ &quot;Create New App&quot;</li><li>Configura: <ul><li><strong>App Name</strong>: <code>thaiheavens-sign-app</code></li><li><strong>Node.js Version</strong>: <code>18.x</code> o <code>20.x</code></li><li><strong>App Directory</strong>: <code>/home/runcloud/thaiheavens-sign-app</code></li><li><strong>Startup File</strong>: <code>backend/dist/index.js</code></li><li><strong>Port</strong>: <code>5000</code> (o lascia che RunCloud scelga)</li><li><strong>Environment</strong>: <code>production</code></li></ul></li></ol><h3 id="_3-2-configura-le-variabili-d-ambiente" tabindex="-1">3.2 Configura le Variabili d&#39;Ambiente <a class="header-anchor" href="#_3-2-configura-le-variabili-d-ambiente" aria-label="Permalink to &quot;3.2 Configura le Variabili d&#39;Ambiente&quot;">â€‹</a></h3><p>Nella sezione &quot;Environment Variables&quot; della Node.js App, aggiungi:</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>NODE_ENV=production</span></span>
<span class="line"><span>PORT=5000</span></span>
<span class="line"><span>SMTP_HOST=smtp.qboxmail.com</span></span>
<span class="line"><span>SMTP_PORT=465</span></span>
<span class="line"><span>SMTP_SECURE=true</span></span>
<span class="line"><span>SMTP_USER=admin@thaiheavens.com</span></span>
<span class="line"><span>SMTP_PASS=b5JZypAsbgjt</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="step-4-build-e-installazione" tabindex="-1">Step 4: Build e Installazione <a class="header-anchor" href="#step-4-build-e-installazione" aria-label="Permalink to &quot;Step 4: Build e Installazione&quot;">â€‹</a></h2><h3 id="_4-1-installa-dipendenze-e-build" tabindex="-1">4.1 Installa Dipendenze e Build <a class="header-anchor" href="#_4-1-installa-dipendenze-e-build" aria-label="Permalink to &quot;4.1 Installa Dipendenze e Build&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Sul server, nella directory del progetto</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/runcloud/thaiheavens-sign-app</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Installa dipendenze backend</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> backend</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Installa dipendenze frontend</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../frontend</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Installa dipendenze docs-site</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../docs-site</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_4-2-crea-directory-storage" tabindex="-1">4.2 Crea Directory Storage <a class="header-anchor" href="#_4-2-crea-directory-storage" aria-label="Permalink to &quot;4.2 Crea Directory Storage&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Crea le directory per lo storage</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/runcloud/thaiheavens-sign-app/backend/storage/original</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/runcloud/thaiheavens-sign-app/backend/storage/signed</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/runcloud/thaiheavens-sign-app/backend/uploads</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Imposta i permessi</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 755</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/runcloud/thaiheavens-sign-app/backend/storage</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 755</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/runcloud/thaiheavens-sign-app/backend/uploads</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="step-5-configurare-nginx-runcloud" tabindex="-1">Step 5: Configurare Nginx (RunCloud) <a class="header-anchor" href="#step-5-configurare-nginx-runcloud" aria-label="Permalink to &quot;Step 5: Configurare Nginx (RunCloud)&quot;">â€‹</a></h2><h3 id="_5-1-crea-un-web-app-in-runcloud" tabindex="-1">5.1 Crea un Web App in RunCloud <a class="header-anchor" href="#_5-1-crea-un-web-app-in-runcloud" aria-label="Permalink to &quot;5.1 Crea un Web App in RunCloud&quot;">â€‹</a></h3><ol><li>Vai su &quot;Web Apps&quot; â†’ &quot;Create New App&quot;</li><li>Configura: <ul><li><strong>App Name</strong>: <code>thaiheavens-sign-app-web</code></li><li><strong>Domain</strong>: <code>tuo-dominio.com</code> (o IP temporaneo)</li><li><strong>PHP Version</strong>: Non necessario (lasciare default)</li><li><strong>Web Directory</strong>: <code>/home/runcloud/thaiheavens-sign-app/frontend/dist</code></li></ul></li></ol><h3 id="_5-2-configura-nginx-per-proxy" tabindex="-1">5.2 Configura Nginx per Proxy <a class="header-anchor" href="#_5-2-configura-nginx-per-proxy" aria-label="Permalink to &quot;5.2 Configura Nginx per Proxy&quot;">â€‹</a></h3><p>Nella Web App, vai su &quot;Nginx Config&quot; e modifica per fare proxy al backend:</p><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Aggiungi questa configurazione nella sezione &quot;Custom Nginx Configuration&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Proxy per API</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> /api </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://localhost:5000;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_http_version </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Upgrade $http_upgrade;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Connection </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;upgrade&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Host $host;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Real-IP $remote_addr;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Forwarded-Proto $scheme;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_cache_bypass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$http_upgrade;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Serve frontend static files</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    root </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/home/runcloud/thaiheavens-sign-app/frontend/dist;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try_files </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$uri $uri/ /index.html;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Serve docs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> /docs </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    alias </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/home/runcloud/thaiheavens-sign-app/docs-site/.vitepress/dist;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try_files </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$uri $uri/ /docs/index.html;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="_5-3-riavvia-nginx" tabindex="-1">5.3 Riavvia Nginx <a class="header-anchor" href="#_5-3-riavvia-nginx" aria-label="Permalink to &quot;5.3 Riavvia Nginx&quot;">â€‹</a></h3><p>Dopo aver modificato la configurazione, RunCloud dovrebbe riavviare Nginx automaticamente. Se non lo fa:</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Via SSH</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reload</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="step-6-avviare-l-applicazione" tabindex="-1">Step 6: Avviare l&#39;Applicazione <a class="header-anchor" href="#step-6-avviare-l-applicazione" aria-label="Permalink to &quot;Step 6: Avviare l&#39;Applicazione&quot;">â€‹</a></h2><h3 id="_6-1-avvia-la-node-js-app" tabindex="-1">6.1 Avvia la Node.js App <a class="header-anchor" href="#_6-1-avvia-la-node-js-app" aria-label="Permalink to &quot;6.1 Avvia la Node.js App&quot;">â€‹</a></h3><ol><li>Vai su RunCloud Dashboard â†’ Node.js Apps â†’ <code>thaiheavens-sign-app</code></li><li>Clicca &quot;Start&quot; o &quot;Restart&quot;</li><li>Verifica i log per assicurarti che sia partita correttamente</li></ol><h3 id="_6-2-verifica-che-funzioni" tabindex="-1">6.2 Verifica che Funzioni <a class="header-anchor" href="#_6-2-verifica-che-funzioni" aria-label="Permalink to &quot;6.2 Verifica che Funzioni&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Controlla che il processo Node.js sia in esecuzione</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ps</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> aux</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Controlla i log</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># In RunCloud Dashboard â†’ Node.js Apps â†’ Logs</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="step-7-configurare-ssl-opzionale-ma-consigliato" tabindex="-1">Step 7: Configurare SSL (Opzionale ma Consigliato) <a class="header-anchor" href="#step-7-configurare-ssl-opzionale-ma-consigliato" aria-label="Permalink to &quot;Step 7: Configurare SSL (Opzionale ma Consigliato)&quot;">â€‹</a></h2><ol><li>Vai su RunCloud Dashboard â†’ Web Apps â†’ <code>thaiheavens-sign-app-web</code></li><li>Vai su &quot;SSL&quot;</li><li>Clicca &quot;Install Let&#39;s Encrypt SSL&quot;</li><li>Inserisci il tuo dominio</li><li>RunCloud installerÃ  automaticamente il certificato SSL</li></ol><h2 id="step-8-configurare-pm2-opzionale-per-auto-restart" tabindex="-1">Step 8: Configurare PM2 (Opzionale, per Auto-Restart) <a class="header-anchor" href="#step-8-configurare-pm2-opzionale-per-auto-restart" aria-label="Permalink to &quot;Step 8: Configurare PM2 (Opzionale, per Auto-Restart)&quot;">â€‹</a></h2><p>RunCloud gestisce automaticamente il processo Node.js, ma se vuoi piÃ¹ controllo:</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Installa PM2 globalmente</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pm2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Crea un file ecosystem.config.js nella root del progetto</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/runcloud/thaiheavens-sign-app</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Crea <code>ecosystem.config.js</code>:</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  apps: [{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;thaiheavens-backend&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    script: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./backend/dist/index.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cwd: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/home/runcloud/thaiheavens-sign-app&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    instances: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    exec_mode: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fork&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    env: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      NODE_ENV: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;production&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      PORT: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    error_file: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./logs/err.log&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    out_file: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./logs/out.log&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    log_date_format: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;YYYY-MM-DD HH:mm:ss Z&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    merge_logs: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    autorestart: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    watch: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="step-9-aggiornamenti-futuri" tabindex="-1">Step 9: Aggiornamenti Futuri <a class="header-anchor" href="#step-9-aggiornamenti-futuri" aria-label="Permalink to &quot;Step 9: Aggiornamenti Futuri&quot;">â€‹</a></h2><p>Per aggiornare l&#39;applicazione:</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Sul server</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/runcloud/thaiheavens-sign-app</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Pull delle modifiche</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Rebuild</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> backend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../frontend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../docs-site</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Riavvia la Node.js App da RunCloud Dashboard</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">â€‹</a></h2><h3 id="l-app-non-si-avvia" tabindex="-1">L&#39;app non si avvia <a class="header-anchor" href="#l-app-non-si-avvia" aria-label="Permalink to &quot;L&#39;app non si avvia&quot;">â€‹</a></h3><ul><li>Controlla i log in RunCloud Dashboard</li><li>Verifica che le variabili d&#39;ambiente siano corrette</li><li>Assicurati che il build sia completato: <code>ls -la backend/dist/</code></li></ul><h3 id="le-api-non-funzionano" tabindex="-1">Le API non funzionano <a class="header-anchor" href="#le-api-non-funzionano" aria-label="Permalink to &quot;Le API non funzionano&quot;">â€‹</a></h3><ul><li>Verifica che Nginx faccia proxy corretto a <code>localhost:5000</code></li><li>Controlla che la Node.js App sia in esecuzione</li><li>Verifica i log di Nginx: <code>sudo tail -f /var/log/nginx/error.log</code></li></ul><h3 id="i-file-pdf-non-vengono-salvati" tabindex="-1">I file PDF non vengono salvati <a class="header-anchor" href="#i-file-pdf-non-vengono-salvati" aria-label="Permalink to &quot;I file PDF non vengono salvati&quot;">â€‹</a></h3><ul><li>Verifica i permessi delle directory storage</li><li>Controlla che le directory esistano</li><li>Verifica lo spazio disco: <code>df -h</code></li></ul><h3 id="il-frontend-non-si-carica" tabindex="-1">Il frontend non si carica <a class="header-anchor" href="#il-frontend-non-si-carica" aria-label="Permalink to &quot;Il frontend non si carica&quot;">â€‹</a></h3><ul><li>Verifica che <code>frontend/dist</code> sia stato creato</li><li>Controlla che Nginx punti alla directory corretta</li><li>Verifica i permessi: <code>chmod -R 755 frontend/dist</code></li></ul><h2 id="vantaggi-di-runcloud" tabindex="-1">Vantaggi di RunCloud <a class="header-anchor" href="#vantaggi-di-runcloud" aria-label="Permalink to &quot;Vantaggi di RunCloud&quot;">â€‹</a></h2><p>âœ… <strong>Gestione Semplice</strong>: Dashboard web per gestire tutto<br> âœ… <strong>SSL Automatico</strong>: Let&#39;s Encrypt integrato<br> âœ… <strong>Backup</strong>: RunCloud puÃ² fare backup automatici<br> âœ… <strong>Monitoring</strong>: Log e metriche integrate<br> âœ… <strong>Multi-App</strong>: Puoi hostare piÃ¹ applicazioni sullo stesso server</p><h2 id="note-importanti" tabindex="-1">Note Importanti <a class="header-anchor" href="#note-importanti" aria-label="Permalink to &quot;Note Importanti&quot;">â€‹</a></h2><ul><li><strong>Storage</strong>: I PDF vengono salvati localmente sul server. Considera backup regolari</li><li><strong>Database</strong>: Attualmente usa <code>sessions.json</code>. Per produzione, considera PostgreSQL o MongoDB</li><li><strong>Sicurezza</strong>: Assicurati di avere firewall configurato (RunCloud puÃ² aiutare)</li><li><strong>Backup</strong>: Configura backup automatici per <code>backend/storage/</code></li></ul><h2 id="costi" tabindex="-1">Costi <a class="header-anchor" href="#costi" aria-label="Permalink to &quot;Costi&quot;">â€‹</a></h2><ul><li><strong>UpCloud</strong>: GiÃ  pagato (se hai giÃ  il server)</li><li><strong>RunCloud</strong>: Gratuito per 1 server, $8/mese per piÃ¹ server</li><li><strong>Totale</strong>: $0-8/mese (molto piÃ¹ economico di Railway!)</li></ul><hr><p><strong>Pronto per il deploy!</strong> ðŸš€</p>`,68)])])}const u=a(l,[["render",p]]);export{c as __pageData,u as default};
